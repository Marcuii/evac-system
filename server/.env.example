# ============================================================
# EES EVACUATION BACKEND - ENVIRONMENT CONFIGURATION
# ============================================================
# Copy this file to .env and fill in the values
# NEVER commit .env to version control!
# ============================================================

# ============================================================
# SERVER CONFIGURATION
# ============================================================
# Server port
PORT=3000

# Environment: development | production
NODE_ENV=development

# ============================================================
# DATABASE
# ============================================================
# Local MongoDB connection string
LOCAL_MONGO_URI=mongodb://127.0.0.1:27017/evac_local

# ============================================================
# CLOUDINARY (Cloud Image Storage)
# ============================================================
# Get credentials from https://cloudinary.com/console
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret
CLOUDINARY_FRAMES_FOLDER=evacuation_frames
CLOUDINARY_FLOOR_MAPS_FOLDER=floor_maps

# ============================================================
# AI ENDPOINTS
# ============================================================
# Local AI server endpoint
LOCAL_AI_ENDPOINT=http://localhost:3090/api/local-ai/analyze
# Cloud AI server endpoint (fallback)
CLOUD_AI_ENDPOINT=http://localhost:3090/api/cloud-ai/analyze
# Timeout settings (milliseconds)
LOCAL_AI_TIMEOUT_MS=15000
CLOUD_AI_TIMEOUT_MS=25000

# ============================================================
# RTSP CAMERA CAPTURE
# ============================================================
# Template URL for RTSP camera capture (use {cameraId} placeholder)
RTSP_TEMPLATE=http://localhost:3090/api/rtsp/capture?cameraId={cameraId}
# Directories for storing frames
TEMP_FRAMES_DIR=./temp_frames
FLOOR_MAPS_DIR=./temp_frames/floor_maps
LOCAL_STORAGE_DIR=./local_storage

# ============================================================
# PERIODIC JOB / SCHEDULER
# ============================================================
# Capture interval in seconds
CAPTURE_INTERVAL_SEC=5
# Number of consecutive failures before auto-disabling a camera
CAMERA_FAILURE_THRESHOLD=3
# Hours after which failure count resets
CAMERA_FAILURE_RESET_HOURS=24

# ============================================================
# DIJKSTRA ALGORITHM WEIGHTS
# ============================================================
# Penalty multipliers for hazard detection (higher = more avoidance)
DIJKSTRA_FIRE_PENALTY=1000
DIJKSTRA_SMOKE_PENALTY=500
DIJKSTRA_PEOPLE_PENALTY=2
# Gradual weight factors when approaching thresholds
DIJKSTRA_PEOPLE_FACTOR=0.5
DIJKSTRA_FIRE_FACTOR=2
DIJKSTRA_SMOKE_FACTOR=1.5
# Enable verbose timing logs (true/false)
DIJKSTRA_TIMING_LOGS=false
# Threshold multiplier when exceeded
DIJKSTRA_THRESHOLD_MULTIPLIER=100

# ============================================================
# USRP / SDR TRANSMISSION
# ============================================================
# Note: Radio params (freq, gain, sample_rate) are configured in usrp_test.py
USRP_TX_DATA_FILE=./utils/results.json
USRP_PADDING_LENGTH=80
USRP_PADDING_LENGTH_EXTRA=33000
USRP_TRANSMISSION_TIMEOUT_MS=30000
USRP_UHD_IMAGES_DIR=/usr/share/uhd/images
USRP_LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libpthread.so.0

# ============================================================
# FILE UPLOAD LIMITS
# ============================================================
# Maximum file size in MB
MAX_UPLOAD_SIZE_MB=10
# Allowed image types (comma-separated)
ALLOWED_IMAGE_TYPES=jpeg,jpg,png,gif,webp

# ============================================================
# ADMIN AUTHENTICATION
# ============================================================
# Secret token for admin API endpoints
# IMPORTANT: Change this in production!
ADMIN_AUTH_TOKEN=your-secure-admin-token-here

# ============================================================
# SECURITY & RATE LIMITING
# ============================================================
# Maximum requests per 15 minutes per IP
RATE_LIMIT_MAX=100
# Comma-separated list of allowed CORS origins (use * for all)
CORS_ORIGINS=*

# ============================================================
# CLOUD MONGODB SYNC CONFIGURATION
# ============================================================
# Cloud MongoDB connection string (e.g., MongoDB Atlas)
# Example: mongodb+srv://user:password@cluster.mongodb.net/evac_cloud
CLOUD_MONGO_URI=

# Note: Cloud sync enabled/disabled and sync interval are now
# managed via the Admin Dashboard Settings page and stored in MongoDB.
# See Settings API documentation for details.

# ============================================================
# LOGGING
# ============================================================
# Log level: error | warn | info | http | debug
LOG_LEVEL=info
